# 第十六章 适配器

适配器同样属于接口隔离模式

# “接口隔离”模式

在组件构建过程中，某些接口之间之间直接的依赖常常会带来很多问题，甚至根本无法实现。采用添加一层间接（稳定）接口。来隔离本来互相紧密关联的接口是一种常见的解决方案

# 1. 动机

- 在软件系统中，由于应用环境的变化，常常需要将“一些现存的对象”放在新的环境中应用，但是新环境要求的接口是这些现存对象所不满足的
- 如何应对这种“迁移的变迁”？如何既能利用现有对象的良好实现，同时又能满足新的应用环境所要求的接口?

# 2. 模式定义

将一个类的接口转换成客户希望的另一个接口。适配器模式使得原本由于接口不兼容而不能一起工作的内些类可以一起工作

# 3. 结构

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717314718784-c604f291-db2c-48b8-921c-d650e513ea7b.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717314718784-c604f291-db2c-48b8-921c-d650e513ea7b.png)

---

# 4. 要点总结

- 适配器模式主要应用于“希望复用一些现存的类，但是接口又与复用环境要求不一致的情况”，在遗留代码复用，类库迁移等方面非常有用
- GOF23定义了两种适配器模式的实现结构：对象适配器和类适配器。但类适配器采用”多继承“的实现方式，一般不推荐使用。对象适配器采用”对象组合“的方式，更符合松耦合精神。
- 适配器模式可以实现的非常灵活，不必拘泥于GOF23中定义的两种结构。例如，完全可以将适配器模式中的”现存对象“作为新的接口方法参数，来达到适配目的