### FetchContent 模块概述

- **FetchContent** 是 CMake 3.11 及以上版本中的一个模块。
- 它允许在构建配置阶段下载和更新外部内容。
- 可以用于下载源代码、压缩包等。

### 为什么使用 FetchContent

- **自动化**：自动下载和更新依赖库，无需手动管理。
- **灵活性**：支持多种来源，包括 Git 仓库、ZIP 文件等。
- **封装性**：将依赖管理逻辑封装在 CMake 脚本中。

### 如何使用 FetchContent

#### 引入模块
```cmake
include(FetchContent)
```

#### 声明依赖
```cmake
FetchContent_Declare(
    glog
    GIT_REPOSITORY https://github.com/google/glog.git
    GIT_TAG        v0.5.0
)
```

#### 下载和更新
```cmake
FetchContent_MakeAvailable(glog)
```

#### 添加可执行文件
```cmake
add_executable(GlogDemo main.cpp)
target_link_libraries(GlogDemo glog::glog)
```

### 使用 ZIP 包

#### 声明依赖
```cmake
FetchContent_Declare(
    glog
    URL https://github.com/google/glog/archive/refs/tags/v0.5.0.tar.gz
    URL_HASH SHA256=ea8b7af2d5c06b2e9e4892a8a1acb63e51c6e90faf403b39198ae28a3091612e
)
```

#### 下载和更新
```cmake
FetchContent_MakeAvailable(glog)
```

### 统一管理 FetchContent 模块

#### 创建 CMake 目录
在项目根目录下创建 `cmake` 子目录，并在其中创建 `glog.cmake` 文件。

#### glog.cmake
```cmake
include(FetchContent)
FetchContent_Declare(
    glog
    URL https://github.com/google/glog/archive/refs/tags/v0.5.0.zip
    URL_HASH SHA256=21bc744fb7f2fa701ee8db339ded7dce4f975d0d55837a97be7d46e8382dea5a
)
FetchContent_MakeAvailable(glog)
```

#### 主 CMakeLists.txt
```cmake
cmake_minimum_required(VERSION 3.20)
project(GlogDemo)
set(CMAKE_CXX_STANDARD 11)
include(cmake/glog.cmake)
add_executable(GlogDemo main.cpp)
target_link_libraries(GlogDemo glog::glog)
```

### 管理多个第三方库

#### 设置 CMAKE_MODULE_PATH
```cmake
list(APPEND CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/cmake)
```

#### 包含多个模块
```cmake
include(glog)
include(other_lib)
```

### 自定义 FetchContent 基目录

#### 设置基目录
```cmake
include(FetchContent)
set(FETCHCONTENT_QUIET OFF)
set(FETCHCONTENT_BASE_DIR ${CMAKE_CURRENT_SOURCE_DIR}/_deps)
FetchContent_MakeAvailable(glog)
```

### 清理构建目录时管理第三方库

#### 保留第三方库
即使在清理构建目录时，也可以通过设置 `FETCHCONTENT_BASE_DIR` 来保留已下载的第三方库。

### 总结

- **FetchContent** 提供了一种自动化管理第三方库的方法。
- 支持从 Git 仓库或 ZIP 包下载。
- 可以统一管理多个第三方库，并自定义下载基目录。
