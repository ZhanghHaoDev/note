# CMake的函数

## 1. 基本概念
- **函数定义**：使用`function`和`endfunction`命令定义。
- **函数名规则**：
  - 以字母开头。
  - 可包含字母、数字和下划线。
  - 不能包含空格或其他特殊字符。
  - 唯一性，不与其他函数或变量重名。

## 2. CMake函数参数
- **参数数量**：可以接受零个或多个参数。
- **参数用途**：传递数据或配置函数行为。
- **参数类型**：可以是任何CMake表达式。

## 3. 特殊参数
- **`ARGN`**：包含所有未命名的参数。
- **`ARGV`**：包含所有传递给函数的参数。
- **`UNPARSED_ARGUMENTS`**：包含所有未解析的参数。

## 4. 作用域
- **变量作用域**：函数内部变量的修改不会影响到函数外部。
- **`PARENT_SCOPE`**：可以在函数内部修改外部变量。

## 5. return()指令
- **用途**：用于提前结束函数。
- **行为**：不返回值，只返回父作用域。

### 指令重载
- **不支持重载**：CMake不支持函数重载。
- **替代方案**：使用不同的函数名称或可选参数来实现类似功能。

### CMake函数中的特殊变量
- **`ARGV`**：包含所有传递给函数的参数。
- **`ARGN`**：包含所有未命名的参数。
- **`CMAKE_CURRENT_LIST_FILE`**：包含当前正在处理的CMake文件的完整路径。
- **`CMAKE_CURRENT_LIST_LINE`**：包含当前正在处理的CMake文件的行号。

### 示例
你的示例已经很好地展示了如何定义和使用函数。这里提供一个使用可选参数的示例：

```cmake
# 定义一个函数，接受一个必需参数和一个可选参数
function(hello name)
  set(salutation "Hello") # 可选参数，默认值
  if(ARGC GREATER 1)
    set(salutation "${ARGV1}")
  endif()
  message("${salutation}, ${name}!")
endfunction(hello)

# 调用函数，只提供必需参数
hello("John")  # 输出: Hello, John!

# 调用函数，提供必需参数和可选参数
hello("John" "Hi")  # 输出: Hi, John!
```

## 6. 注意事项
- **函数名唯一性**：确保函数名唯一，避免与现有变量或函数重名。
- **参数明确性**：函数参数和特殊参数应该在函数定义时明确。
- **`PARENT_SCOPE`的使用**：使用`PARENT_SCOPE`时，确保外部变量已存在或在函数外部定义。
- **可选参数**：可以通过检查`ARGC`（参数计数）来处理可选参数。
