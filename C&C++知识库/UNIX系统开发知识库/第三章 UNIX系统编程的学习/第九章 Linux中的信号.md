# 信号的概念

信号是一种软件层面上的中断，用于进程间通信或处理异步事件。

# 信号的机制

信号的发送和处理是异步的，进程在收到信号后会暂停当前执行，转而执行信号处理函数。

# 信号的事件和状态

- **产生信号**：由用户输入、系统调用、软件条件、硬件异常或命令产生。
- **递达信号**：信号被送到进程。
- **未决信号**：信号在处理前的状态，可能因为阻塞而未决。

# 信号的处理方式

- **执行默认动作**：如终止进程。
- **忽略信号**：不处理信号。
- **捕捉信号**：自定义信号处理函数。

# 信号的四要素

- **编号**：信号的唯一标识。
- **名称**：信号的名称，如`SIGINT`。
- **事件**：产生信号的原因。
- **默认处理动作**：信号的默认行为。

# 信号的发送和处理函数

- **`kill`命令**：发送信号给进程。
- **`kill`函数**：编程方式发送信号。
- **`alarm`函数**：设置定时器。
- **`setitimer`函数**：设置高精度定时器。

# 信号集操作

- **`sigemptyset`**：清空信号集。
- **`sigfillset`**：填充信号集。
- **`sigaddset`**：添加信号到信号集。
- **`sigdelset`**：从信号集中删除信号。
- **`sigismember`**：检查信号是否在信号集中。

# 设置信号屏蔽字和解除屏蔽

- **`sigprocmask`函数**：设置或获取信号屏蔽字。

# 查看未决信号集

- **`sigpending`函数**：查看未决信号集。

# 信号捕捉

- **`signal`函数**：注册信号处理函数。
- **`sigaction`函数**：更灵活地处理信号。

# 信号捕捉特性

- 信号处理函数执行期间，该信号会被自动屏蔽。

# SIGCHLD信号

- 子进程终止时，父进程会收到`SIGCHLD`信号。

# 进程和会话

- **进程组**：一组进程的集合，可以一起被管理。
- **会话**：一个或多个进程组的集合，可以有控制终端。

# 创建守护进程

守护进程是后台运行的服务进程，通常独立于控制终端。

# 创建守护进程的步骤

1. 创建子进程，父进程退出。
2. 在子进程中创建新会话。
3. 改变当前目录为根目录或其他固定目录。
4. 重设文件权限掩码。
5. 关闭不需要的文件描述符。
6. 开始执行守护进程的核心工作。

# 补充知识

- **实时信号**：Linux提供了实时信号，用于需要快速处理的情况。
- **信号的排队**：实时信号支持排队，常规信号不支持。
- **信号的继承**：子进程继承父进程的信号屏蔽字和未决信号集。