# 静态库和共享库（动态库）

## 1. 静态库和共享库（动态库） note

1. 程序库是一组预先编译好的代码，它们可以被多个不同的程序调用以执行常见的任务。
2. 库的主要优点包括代码重用、模块化设计、简化编译过程和便于维护。
3. 库分为静态库和共享库（动态库）两种类型。

## 2. 静态库（Static Libraries）

1. 定义：静态库包含在编译时链接到程序中的代码。它们在程序执行前就已经被整合到可执行文件中。
2. 文件后缀：Windows-.lib， unix-.a
3. CMake创建静态库：add_library(库名称 STATIC 库构建需要的文件)
4. 静态库在整个工程编译的时候，静态库在编译过程中被链接到可执行文件中。具体来说，静态库的代码在编译时被复制到最终的可执行文件中，这意味着可执行文件包含了所有需要的库代码
5. 链接阶段：目标文件和静态库文件（.a 文件）被链接器整合，生成最终的可执行文件。
6. 所以程序如果在编译阶段显示缺少文件，可能是因为静态库找不到
7. 优缺点：
   - 优点：程序启动速度可能更快，因为库代码已经包含在可执行文件中。
   - 缺点：更新库时需要重新编译整个程序，可能导致较大的可执行文件。

## 3. 共享库（Shared Libraries / Dynamic Libraries）

1. 定义：共享库在程序运行时被动态加载，可以被多个程序同时使用，不需要被包含在每个程序的可执行文件中。
2. 文件后缀：window-.dll  unix-.so
3. CMake创建动态库：add_library(库名称 SHARED 库构建需要的文件)
4. 动态库在程序运行时被加载，可以在程序启动时或运行过程中加载。
5. 所以程序在运行阶段显示缺少文件：可能的原因是因为动态库找不到
6. 动态库的优缺点
- **优点**：
  - 便于库的更新和维护，不需要重新编译使用该库的所有程序。
  - 节省磁盘空间和内存，因为多个程序可以共享同一份库代码。
- **缺点**：
  - 程序启动可能稍慢，因为需要在运行时加载库。
  - 需要确保运行时库的可用性。