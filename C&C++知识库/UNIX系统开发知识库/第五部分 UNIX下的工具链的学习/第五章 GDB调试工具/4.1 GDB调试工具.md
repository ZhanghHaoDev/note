GDB（GNU Debugger）是一个功能强大的命令行调试工具，用于调试C和C++程序。以下是GDB的一些常用命令和调试技巧的整理和补充：

# GDB常用命令：

1. **设置调试信息**：
   ```sh
   gcc -g main.c -o main
   ```
   `-g` 选项告诉GCC生成调试信息。

2. **开始调试**：
   ```sh
   gdb ./main
   ```
   或者直接使用 `gdb` 命令后跟可执行文件名。

3. **列举源码**：
   ```sh
   list [行号/函数名]
   ```
   显示当前行号或函数名的源代码。

4. **设置断点**：
   ```sh
   break [行号/函数名]
   ```
   在指定的行号或函数名处设置断点。

5. **运行程序**：
   ```sh
   run [参数]
   ```
   运行程序，可以传递参数给程序。

6. **单步执行**：
   ```sh
   next / n
   ```
   执行下一条指令，不进入函数内部。

   ```sh
   step / s
   ```
   执行下一条语句，进入函数内部。

7. **输出变量值**：
   ```sh
   print / p [变量名]
   ```
   输出变量的值。

8. **退出调试**：
   ```sh
   quit / q
   ```
   退出GDB。

9. **处理段错误**：
   当程序崩溃并显示段错误时，GDB会自动停止。使用 `list` 命令查看当前代码位置，`backtrace / bt` 查看调用栈。

10. **查看断点**：
    ```sh
    info breakpoints / info b
    ```
    查看所有设置的断点。

11. **结束当前函数调用**：
    ```sh
    finish
    ```
    执行到当前函数结束。

12. **查看栈帧**：
    ```sh
    backtrace / bt
    ```
    查看当前的调用栈。

# 推荐的调试器：

- **cgdb**：是一个GDB的图形界面版本，它在终端中显示源代码，同时在底部提供GDB命令行。使用方法：生成可调试的代码后，输入 `cgdb` 后跟可执行文件名。

# 调试技巧：

- **条件断点**：可以为断点设置条件，只有满足条件时才会停止。
  ```sh
  break [行号/函数名] if [条件表达式]
  ```

- **观察点**：可以监视变量的值，当变量值改变时程序会停止。
  ```sh
  watch [变量名]
  ```

- **反向跟踪**：在程序崩溃后，可以使用反向跟踪（backtrace）查看函数调用栈。

- **信号处理**：可以设置GDB处理或忽略特定信号。

- **多线程调试**：如果程序是多线程的，可以使用 `info threads` 查看所有线程，`thread [线程号]` 切换当前线程。

- **寄存器查看**：可以使用 `info registers` 查看CPU寄存器的状态。

- **内存查看**：可以使用 `x` 命令查看内存内容。

GDB是一个复杂的工具，提供了许多高级功能，以上只是一些基本的命令和概念。熟练使用GDB可以大大提高调试程序的效率。
