# 网络开发的简介

## 1. 网络开发的简介

基本概念：网络开发是指通过网络技术，实现不同计算机之间的数据交换和通信，使得计算机之间能够相互协作，共享资源，提高工作效率。

要编写通过计算机网络腾讯的程序，首先要确定这些程序相互通信所用的协议。在深入设计一个协议的细节之前，应该从高层次决断通信由那个程序发起以及相应在何时产生。
比如：一般认为web服务器程序是一个长时间运行的程序（守护进程），他只在响应来自网络的请求时才发送网络消息。协议的另外一端是web客户端程序，比如浏览器，与服务器进程的通信总述客户进程发起。
大多数的网络应用就是按照划分**客户端/服务器**模型来设计的。
在设计网络应用时，确定总是由客户端发起请求往往可以简化协议和程序本身。

1. 笔记当中的代码仓库[cpp_network_stu](https://github.com/ZhanghHaoDev/cpp_network_stu.git)
2. 笔记的大纲主要是参考[《UNIX网络编程》](https://book.douban.com/subject/1500149/)这本书的内容，但是不会完全照搬，会根据自己的理解和实际情况进行调整。

### 推荐的书籍

1. 《TCP/IP详解 卷1：协议》
2. 《UNIX网络编程》
3. 《Linux高性能服务器编程》

## 2. 协议 

协议是计算机网络中的通信规则，是计算机之间通信的约定和规范。

### 1. TCP/IP 协议

#### 1.1 TCP（传输控制协议）
- **可靠性**：TCP 提供可靠的数据传输，通过确认和重传机制确保数据包的正确传输。
- **面向连接**：在传输数据之前，TCP 需要建立连接（三次握手）。
- **流控制**：TCP 使用滑动窗口机制进行流控制，防止发送方发送数据过快。
- **拥塞控制**：TCP 通过慢启动、拥塞避免、快速重传和快速恢复等算法进行拥塞控制。

#### 1.2 IP（互联网协议）
- **无连接**：IP 是无连接的协议，每个数据包独立传输，不保证顺序和可靠性。
- **路由**：IP 负责数据包的路由选择，通过 IP 地址确定数据包的目的地。
- **分片和重组**：IP 负责将大数据包分片，并在目的地重组。

#### 1.3 UDP（用户数据报协议）
- **无连接**：UDP 是无连接的协议，不需要建立连接即可传输数据。
- **不可靠**：UDP 不保证数据包的顺序和可靠性，适用于实时应用（如视频流、在线游戏）。
- **低开销**：UDP 头部开销小，传输效率高。

### 2. HTTP/HTTPS 协议

#### 2.1 HTTP（超文本传输协议）
- **无状态**：HTTP 是无状态协议，每个请求都是独立的，不保留之前请求的信息。
- **请求-响应模型**：客户端发送请求，服务器返回响应。
- **方法**：常见的 HTTP 方法包括 GET、POST、PUT、DELETE 等。
- **状态码**：HTTP 使用状态码表示请求的结果，如 200（成功）、404（未找到）、500（服务器错误）等。

#### 2.2 HTTPS（安全超文本传输协议）
- **加密**：HTTPS 在 HTTP 的基础上增加了 SSL/TLS 加密，确保数据传输的安全性。
- **认证**：HTTPS 通过数字证书验证服务器的身份，防止中间人攻击。
- **完整性**：HTTPS 确保数据在传输过程中不被篡改。

### 3. DNS（域名系统）
- **域名解析**：DNS 将域名解析为 IP 地址，便于用户访问网站。
- **层次结构**：DNS 采用层次结构，包括根域、顶级域（如 .com、.org）、二级域（如 example.com）等。
- **记录类型**：常见的 DNS 记录类型包括 A 记录（IPv4 地址）、AAAA 记录（IPv6 地址）、CNAME 记录（别名）、MX 记录（邮件交换）等。

### 4. FTP（文件传输协议）
- **控制连接和数据连接**：FTP 使用两个连接，一个用于控制命令（控制连接），一个用于传输数据（数据连接）。
- **主动模式和被动模式**：在主动模式下，服务器主动连接客户端的数据端口；在被动模式下，客户端连接服务器的数据端口。
- **命令**：常见的 FTP 命令包括 USER、PASS、LIST、RETR、STOR 等。

### 5. SMTP（简单邮件传输协议）
- **邮件传输**：SMTP 用于在邮件服务器之间传输邮件。
- **命令**：常见的 SMTP 命令包括 HELO、MAIL FROM、RCPT TO、DATA、QUIT 等。
- **端口**：SMTP 通常使用端口 25 进行通信。

### 6. POP3/IMAP（邮件访问协议）
- **POP3（邮局协议版本3）**：POP3 用于从邮件服务器下载邮件到本地客户端，通常使用端口 110。
- **IMAP（互联网邮件访问协议）**：IMAP 允许在邮件服务器上管理和访问邮件，通常使用端口 143。

### 7. WebSocket 协议
- **全双工通信**：WebSocket 提供全双工通信，允许客户端和服务器之间实时双向数据传输。
- **握手过程**：WebSocket 通过 HTTP 协议进行握手，建立连接后切换到 WebSocket 协议。
- **低延迟**：WebSocket 适用于需要低延迟实时通信的应用，如在线聊天、实时通知等。

### 8. SSL/TLS（安全套接字层/传输层安全协议）
- **加密**：SSL/TLS 提供数据加密，确保数据在传输过程中不被窃听。
- **认证**：SSL/TLS 通过数字证书验证服务器和客户端的身份。
- **完整性**：SSL/TLS 确保数据在传输过程中不被篡改。

## 网络模型

网络模型是计算机网络中用于描述和设计网络协议和通信的分层结构。以下是常见的网络模型及其知识点：

### 1. OSI 模型（开放系统互连模型）

OSI 模型是一个标准化的网络通信模型，由国际标准化组织（ISO）制定。它将网络通信分为七个层次，每一层都有特定的功能和协议。

```plaintext
+---------------------+
| 应用层 (Application)|
|---------------------|
| 表示层 (Presentation)|
|---------------------|
| 会话层 (Session)    |
|---------------------|
| 传输层 (Transport)  |
|---------------------|
| 网络层 (Network)    |
|---------------------|
| 数据链路层 (Data Link)|
|---------------------|
| 物理层 (Physical)   |
+---------------------+
```

#### 1.1 应用层（Application Layer）
- **功能**：提供网络服务和应用程序接口。
- **协议**：HTTP、HTTPS、FTP、SMTP、POP3、IMAP、DNS 等。

#### 1.2 表示层（Presentation Layer）
- **功能**：数据格式化、加密和解密、数据压缩。
- **协议**：SSL/TLS、JPEG、MPEG 等。

#### 1.3 会话层（Session Layer）
- **功能**：建立、管理和终止会话。
- **协议**：NetBIOS、RPC 等。

#### 1.4 传输层（Transport Layer）
- **功能**：提供端到端的可靠传输和流量控制。
- **协议**：TCP、UDP。

#### 1.5 网络层（Network Layer）
- **功能**：负责数据包的路由和转发。
- **协议**：IP、ICMP、IGMP、ARP、RARP。

#### 1.6 数据链路层（Data Link Layer）
- **功能**：提供节点间的数据传输和错误检测。
- **协议**：Ethernet、PPP、HDLC、Frame Relay。

#### 1.7 物理层（Physical Layer）
- **功能**：定义物理设备的标准，如电缆、连接器、传输速率等。
- **协议**：IEEE 802.3（以太网）、IEEE 802.11（无线局域网）。

### 2. TCP/IP 模型

TCP/IP 模型是互联网的基础模型，由四个层次组成。它是一个简化的网络模型，广泛应用于实际网络中。


### TCP/IP 模型

```plaintext
+---------------------+
| 应用层 (Application)|
|---------------------|
| 传输层 (Transport)  |
|---------------------|
| 网络层 (Internet)   |
|---------------------|
| 网络接口层 (Network Interface)|
+---------------------+
```

#### 2.1 应用层（Application Layer）
- **功能**：提供网络服务和应用程序接口。
- **协议**：HTTP、HTTPS、FTP、SMTP、POP3、IMAP、DNS 等。

#### 2.2 传输层（Transport Layer）
- **功能**：提供端到端的可靠传输和流量控制。
- **协议**：TCP、UDP。

#### 2.3 网络层（Internet Layer）
- **功能**：负责数据包的路由和转发。
- **协议**：IP、ICMP、IGMP、ARP、RARP。

#### 2.4 网络接口层（Network Interface Layer）
- **功能**：提供节点间的数据传输和错误检测。
- **协议**：Ethernet、PPP、HDLC、Frame Relay。

### 3. OSI 模型与 TCP/IP 模型的对比

| OSI 模型       | TCP/IP 模型       | 功能描述                         |
| -------------- | ----------------- | -------------------------------- |
| 应用层         | 应用层            | 提供网络服务和应用程序接口       |
| 表示层         | -                 | 数据格式化、加密和解密、数据压缩 |
| 会话层         | -                 | 建立、管理和终止会话             |
| 传输层         | 传输层            | 提供端到端的可靠传输和流量控制   |
| 网络层         | 网络层            | 负责数据包的路由和转发           |
| 数据链路层     | 网络接口层        | 提供节点间的数据传输和错误检测   |
| 物理层         | 网络接口层        | 定义物理设备的标准               |

### OSI 模型与 TCP/IP 模型对比

```plaintext
+---------------------+---------------------+
| OSI 模型            | TCP/IP 模型         |
+---------------------+---------------------+
| 应用层 (Application)| 应用层 (Application)|
|---------------------|---------------------|
| 表示层 (Presentation)|                     |
|---------------------|                     |
| 会话层 (Session)    |                     |
|---------------------|---------------------|
| 传输层 (Transport)  | 传输层 (Transport)  |
|---------------------|---------------------|
| 网络层 (Network)    | 网络层 (Internet)   |
|---------------------|---------------------|
| 数据链路层 (Data Link)| 网络接口层 (Network Interface)|
|---------------------|---------------------|
| 物理层 (Physical)   |                     |
+---------------------+---------------------+
```

### 4. 网络模型的应用

#### 4.1 网络协议设计
- 网络模型为网络协议的设计提供了分层结构，使得每一层的协议可以独立开发和优化。

#### 4.2 网络故障排除
- 网络模型帮助网络工程师定位和解决网络故障，通过分层分析问题所在。

#### 4.3 网络安全
- 网络模型为网络安全提供了分层防护机制，每一层都可以采取不同的安全措施。
