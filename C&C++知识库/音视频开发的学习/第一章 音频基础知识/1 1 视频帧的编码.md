# 1.1 视频帧的编码

# 1. 视频的编码格式

1. opencv的mat类型

opencv的mat类型用于存储图像或者视频帧，它是一个2D的图像，可以是任意的数据类型

1. YUV是一种颜色编码系统常用于视频系统，在YUV当中，Y是亮度分量，U和V是色度分量，YUV格式的图像数据通常以平面格式存储，即先存储所有的Y分量，然后存储U分量，最后存储V分量
2. H264，h264是一种视频编码格式，也称为MPEG-4 Part 10，或AVC，h264编码的视频可以高效的进行压缩，以减少数据量，同时保持较高的视频质量
3. YUV格式

YUV格式是一种颜色编码系统，常用于视频系统，Y表示亮度，U和V表示色度，Y是一个无符号的短整型，U和V的范围通常是-128到127但是在视频系统里面，负数的色度是没有区别的

1. RGB和YUV的区别

RGB和YUV都属于颜色空间，RGB主要是蓝色，绿色，红色，YUV主要用于视频系统，Y表示亮度或者灰度，U和V表示色度或者色彩，主要的区别是如何表示颜色

1. 为什么将mat类型转换为yuv，再转换到h264？

mat类型是opencv的常用的类型，**用于做算法处理**，比如图像识别或者边缘检测等算法的实现，YUV是一种颜色空间，转换为YUV主要用于压缩数据，将原始的数据压缩为可以传**输的数据类型**，**H264是一种视频编码标准**，类似于MP4的视频格式，这个过程可以理解为获取视频原始数据->算法处理（mat）->视频数据压缩（yuv）->编码传输（h264）

1. 这个过程是必须的吗？

这个过程不是必须的，我们也可以直接将原始视频数据转换为YUV的格式，YUV的数据也可以不编码为H264，如果不需要压缩或者传输

1. YUV420P

YUV420P是一种颜色编码系统，常用于视频编码和解码。在这个系统中，Y代表亮度（Luminance），U和V代表色度（Chrominance）。420表示色度分量的采样方式，P表示平面（

Planar）存储方式。

Y：亮度分量，决定了图像的明暗。

U：色度分量，从蓝色到红色的色彩范围。

V：色度分量，从绿色到紫色的色彩范围。

在YUV420P中，"420"表示色度分量U和V的水平和垂直分辨率都是亮度分量Y的一半。这是因为人眼对亮度的敏感度远高于色度，所以在视频编码时，可以通过降低色度分量的分辨率来减少数据

量，从而实现压缩。

"P"表示平面存储方式，即Y、U、V三个分量分别存储，每个分量都是一个二维数组，数组的大小

等于该分量的分辨率。

例如，对于一个分辨率为1280x720的YUV420P格式的图像，Y分量的大小为1280x720，U和V分量的

大小都为640x360

1. 我们使用h264编码，这是一种压缩的视频编码，直接传输编码为h264的数据，接收到以后，如果接收多个编码（一个数据包包含一帧的数据），就可以直接使用标准库的文件类，写为.h264后缀的文件，可以直接使用播放器播放文件

如果想要在每一帧当中传输一些数据，我们可以使用SEI，就是给每一帧都添加一个备注消息

在解析h264编码的时候，如何解析SEI？这里附上具体的编码

我这里使用的是x264库来进行编码

需要注意的是：SEI消息使用编码不是固定的，需要知道具体的编码才可以解析