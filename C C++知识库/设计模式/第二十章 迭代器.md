# 第二十章 迭代器

# “数据结构”模式

常常有一些组件在内部具有特定的数据结构，如果让客户程序依赖这些特定的数据结构，将极大的破坏组件的复用性。这个时候，将这些特定数据结构封装在内部，在外部提供统一的接口，来实现与特定数据结构无关的访问，是一种行之有效的解决方案

# 动机

- 在软件构建过程中，集合对象内部结构常常变化各异。但对于这些集合对象，我们希望在不暴露其内部结构的同时，可以让外部客户代码透明的访问其中包含的元素；同时这种“透明遍历”也为“同一种算法在多种集合对象上进行操作”，提供了可能。
- 使用面向对象技术将这种遍历机制抽象为“迭代器对象”为“应对变化中的集合对象”提供了一种优雅的方式

# 模式定义

提供一种方法顺序访问一个聚合对象中的各个元素，而又不暴漏（稳定）该对象的内部表示

# 结构

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717314815423-a9be138e-b471-4204-9345-dfa2ff05517e.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717314815423-a9be138e-b471-4204-9345-dfa2ff05517e.png)

---

模板属于编译时多态，虚函数属于运行时多态

# 要点总结

- 迭代抽象：访问一个聚合对象的内容而无暴露他的内部表示
- 迭代多态：为遍历不同的集合结构 提供一个统一的接口，从而支持同样的算法在不同的集合结构上进行操作
- 迭代器的健壮性考虑：遍历的同时更改迭代器所在的集合结构，会导致问题