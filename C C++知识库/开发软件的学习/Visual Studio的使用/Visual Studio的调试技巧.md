# Visual Studio的调试技巧

IDE常用调试方式

1. Debug调试
2. Release调试：排查Release下面的问题
3. 附加到进程调试：调试底层的dll模块

vs下特殊的值

0xcccccccc：表示程序在微软c++调试状态下stack（栈内存）没有被初始化

就是常见的“烫烫烫烫烫烫烫烫烫烫烫烫…..”

0xcdcdcdcd：表示程序在微软c++调试状态下heap（堆内存）没有被初始化

就是常见“屯屯屯屯屯屯屯屯屯屯屯屯屯屯……”

0xfeeefeee：表示在程序在微软c++调试状态下内存已经被释放，但是程序依旧去访问，从而报出的错误，已经释放的内存

IDE的调试技巧：

条件断点

人为构造的“if条件断点”

数据断点

调试程序时发生了闪退，可以尝试到output窗口中找到线索

使用vs和IDA查看汇编代码

# 变量未被初始化

变量没有被初始化，会引发很多的问题，这里一定要注意细节，多关注细节才能有更加深入的理解

变量未被初始化场景

变量一直没有被初始化

变量在程序运行到某一阶段的时候被赋值（被初始化)，比如收到某个通知消息后，但在被赋值之前可能会被使用，引发异常

所以，要在构造函数中进行初始化，对于空指针，在构造函数中设置为NULL，在访问的时候要判断是否为NULL

Debug下调试器会堆未初始化的内存自动初始化：

未初始化的栈内存，会被填充为0xcccccc

未初始化的堆内存，会被填充为0xcdcdcd

Release下不会自动初始化，将会是分配内存中残留的随机值

变量一定要初始化，一般在构造函数中就初始化

Release下调试

在Debug下面变量会被初始化，但是在Release下面的不会被初始化的

打开vs下面的Release下面的调试开关，以及调试信息，还有关闭优化

附加到进程调试

调试单个模块，一般不需要搭建Release调试环境，只需要安装Release版本的安装包，然后编译到要调试的模块，然后将编译模块生成的dll库拷贝到exe主程序的目录中，使用附加到进程调试，即可调用底层模块的代码

为什么将dll库拷贝到exe主程序目录中就能调试？

因为编译时会自动将当前dll模块对应的pdb文件的绝对路径写道dll文件中，所以vs通过这个路径可以找到pdb文件，就有调试符号和信息了，所以可以调试