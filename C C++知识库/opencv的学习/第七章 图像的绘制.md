# 第七章 图像的绘制

# 1. 绘制图形

# 1.1 绘制直线

void cv::line(InputOutputArray     img,

Point     pt1,

Point     pt2,

const Scalar &     color,

int     thickness = 1,

int     lineType = LINE_8,

int     shift = 0

)

---

- pt1：直线起始点在图像中的坐标
- pt2：直线终点在图像中的坐标
- color：圆形的颜色，用三通道表示
- thickness：边界的类型，可取值为FILED，LINE_4，LINE_8和LINE_AA
- shift：中心坐标和半径数值中的小数位数

# 1.2 绘制圆形

void cv::circle    (    InputOutputArray     img,

Point     center,

int     radius,

const Scalar &     color,

int     thickness = 1,

int     lineType = LINE_8,

int     shift = 0

)

---

- img：绘制图形的图像
- center：圆形的中心位置
- radius：圆形的半径长度，单位为像素
- color：圆形的颜色，用三通道表示
- thickness：绘制一个实心的圆形，我们可以设置为-1

# 1.3 绘制椭圆形

void cv::ellipse    (    InputOutputArray     img,

Point     center,

Size     axes,

double     angle,

double     startAngle,

double     endAngle,

const Scalar &     color,

int     thickness = 1,

int     lineType = LINE_8,

int     shift = 0

)

---

- center：椭圆的中心坐标
- axes：椭圆主轴大小的一半
- angle：椭圆旋转的角度，单位为度
- startAngle：椭圆弧起始角度，单位为度
- endAngle：椭圆弧终止角度，单位为度

# 1.4 绘制矩形

void cv::rectangle    (    InputOutputArray     img,

Point     pt1,

Point     pt2,

const Scalar &     color,

int     thickness = 1,

int     lineType = LINE_8,

int     shift = 0

)

---

- pt1：左上角顶点
- pt2：右上角顶点

# 1.5 绘制多边形

void cv::fillPoly(    InputOutputArray     img,

const Point **     pts,

const int *     npts,

int     ncontours,

const Scalar &     color,

int     lineType = LINE_8,

int     shift = 0,

Point     offset = Point()

)

---

- pts：多边形顶点数组，可以存放多个多边形的顶点坐标的数组
- npts：每个多边形顶点数组中顶点个数
- ncontours：绘制多边形的个数
- offset：所有顶点的可选偏移

# 1.6 绘制文字

void cv::putText(    InputOutputArray     img,

const String &     text,

Point     org,

int     fontFace,

double     fontScale,

Scalar     color,

int     thickness = 1,

int     lineType = LINE_8,

bool     bottomLeftOrigin = false

)

---

- text：输出到图像中的文字，目前opencv仅支持英文
- org：图像中文字字符串的左下角像素坐标
- fontFace：字体类型
- fontSize：字体的大小
- bottomLeftOrigin：图像数据原点的位置，默认左上角，右下角-true

# 1.7 实例

// 1. 直线的绘制

Mat img = imread("./leno.jpg", IMREAD_COLOR);

line(img, Point(0, 0), Point(100, 100), Scalar(0, 0, 255), 2, LINE_8);

imshow("img", img);

// 2. 圆形的绘制

circle(img, Point(100, 100), 50, Scalar(0, 255, 0), 2, LINE_8);

imshow("img", img);

// 2.2 绘制一个实心圆

circle(img, Point(100, 100), 50, Scalar(0, 255, 0), -1, LINE_8);

// 3. 椭圆的绘制

ellipse(img, Point(100, 100), Size(100, 50), 0, 0, 360, Scalar(255, 0, 0), 2, LINE_8);

imshow("img", img);

// 4. 矩形的绘制

rectangle(img, Point(100, 100), Point(200, 200), Scalar(255, 0, 0), 2, LINE_8);

imshow("img", img);

// 5. 多边形的绘制

Point pts[1][5];

pts[0][0] = Point(100, 100);

pts[0][1] = Point(200, 100);

pts[0][2] = Point(200, 200);

pts[0][3] = Point(100, 200);

pts[0][4] = Point(100, 100);

const Point* ppts[] = { pts[0] };

int npt[] = { 5 };

polylines(img, ppts, npt, 1, 1, Scalar(0, 255, 255), 2, LINE_8);

imshow("img", img);

// 6. 文字的绘制

putText(img, "Hello OpenCV", Point(100, 100), FONT_HERSHEY_SIMPLEX, 1, Scalar(0, 255, 255), 2, LINE_8);

imshow("img", img);

waitKey(0);

---

# 2. 图像的截取

cv::Range::Range(int _start,int _end);

---

- start：区间的开始
- end：区间的结束

Rect_(_Tp _x,Tp _y,Tp _width,_Tp _height);

---

- _Tp：数据类型，c++模板特性，可以用int，double，float等替换
- x：矩形区域左上角第一个像素的x坐标，第一个像素的列数
- y：矩形区域左上角第一个像素的y坐标，也就是第一个像素的行数
- width：矩形的宽，单位像素
- height：矩形的高，单位像素

// 7. 图像的截取

Mat img_roi = img(Rect(100, 100, 100, 100));

imshow("img_roi", img_roi);

---

# 3. 图像的深拷贝与浅拷贝

# 3.1 深拷贝函数

void cv::copyTo(InputArray     src,

OutputArray     dst,

InputArray     mask

)

---

- src：待拷贝图像
- dst：深拷贝后的图像
- mask：深拷贝时的掩码矩阵

void cv::copyTo(onputArray     m,

iutputArray mask

)const

---

- m：深拷贝后的图像
- mask：深拷贝时的掩码矩阵