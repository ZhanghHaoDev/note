# 第五章 视频的读取

# 1. 视频加载（读取）/摄像头调用

cv::VideoCapture::VideoCapture(const String & filename,int apiPreference);

---

- filename : 读取的视频文件或者图像序列名称
- apiPreference : 读取数据时设置的属性，例如编码格式等

如果第一个调用的是摄像头就输入摄像头的ID，第二个类默认不调用

# 2. 视频文件的保存

cv::VideoWriter::VideoWriter(const String & filename,int fourcc,double fps,

Size frameSize,bool isColor = true)

---

- filename： 保存视频的地址和文件名称，包含视频格式
- fourcc ： 压缩帧的4字节编码器代码
- fps： 保存视频的帧率，即视频中每秒图像的张数
- framSize： 视频帧的尺寸
- isColor： 保存视频是否为彩色视频

# 3. 实例

VideoCapture video;

video.open("./110533.mp4");

if (video.isOpened())

{

cout << "video open success!" << endl;

}

else

{

cout << "video open failed!" << endl;

return -1;

}

// 输出视频的帧率

cout << "fps = " << video.get(CAP_PROP_FPS) << endl;

// 输出视频的宽度

cout << "width = " << video.get(CAP_PROP_FRAME_WIDTH) << endl;

// 显示视频的图像

while (1)

{

Mat frname;

video >> frname;

if (frname.empty())

{

cout << "video is over!" << endl;

break;

}

imshow("video", frname);

uchar key = waitKey(1000/ video.get(CAP_PROP_FPS));

if (key == 'q')

{

break;

}

}

---