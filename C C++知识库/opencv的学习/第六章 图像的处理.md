# ç¬¬å…­ç«  å›¾åƒçš„å¤„ç†

# 1. å›¾åƒé¢œè‰²ç©ºé—´

# 1.1 RGBé¢œè‰²æ¨¡å‹

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320450362-5a990862-cc40-486c-9f15-d59d9c51d772.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320450362-5a990862-cc40-486c-9f15-d59d9c51d772.png)

---

- ç¬¬ä¸€ä¸ªé€šé“æ—¶è“è‰²ï¼ˆBï¼‰åˆ†é‡
- ç¬¬äºŒä¸ªé€šé“æ—¶ç»¿è‰²ï¼ˆGï¼‰åˆ†é‡
- ç¬¬ä¸‰ä¸ªé€šé“æ—¶çº¢è‰²ï¼ˆRï¼‰åˆ†é‡
1. å›¾åƒæ•°æ®ç±»å‹é—´çš„äº’ç›¸è½¬æ¢

void convertTo(OutputArray m,int rtypr,double alpha,double beta);

---

- mï¼šè¾“å‡ºå›¾åƒ
- rtypeï¼šè½¬æ¢åæ•°æ®ç±»å‹
- alphaï¼šç¼©æ”¾ç³»æ•°
- betaï¼šå¹³ç§»ç³»æ•°

# 1.2 HSVé¢œè‰²æ¨¡å‹

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320450473-6557a009-617a-4149-b5eb-59320dd1ee9c.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320450473-6557a009-617a-4149-b5eb-59320dd1ee9c.png)

---

- Hæ˜¯è‰²åº¦ï¼ˆHueï¼‰é¢œè‰²
- Sæ˜¯é¥±å’Œåº¦ï¼ˆSaturationï¼‰æ·±æµ…
- Væ˜¯äº®åº¦ï¼ˆValueï¼‰äº®æš—

# 1.3 GRAYé¢œè‰²æ¨¡å‹

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320450317-f66e0483-4c2e-49ec-826b-81155b87b87c.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320450317-f66e0483-4c2e-49ec-826b-81155b87b87c.png)

---

å·¥ä¸šä¸Šå¸¸ç”¨ï¼Œç°åº¦å›¾ï¼Œåªèƒ½RGBè½¬ç°åº¦å›¾ï¼Œä¸èƒ½ç°åº¦å›¾è½¬RGB

1. é¢œè‰²è½¬æ¢

void CVtClor(inputArray src,OutputArray dst,int code,int dstCn)

---

- srcï¼šå¸¦è½¬æ¢é¢œè‰²æ¨¡å‹çš„åŸå§‹å›¾åƒ
- dstï¼š è½¬æ¢é¢œè‰²æ¨¡å‹åçš„ç›®æ ‡å›¾åƒ
- codeï¼šé¢œè‰²ç©ºé—´è½¬æ¢çš„æ ‡å¿—ï¼Œå¦‚ç”±RGBè½¬åˆ°HSV
- dstCnï¼šç›®æ ‡å›¾åƒä¸­çš„é€šé“æ•°ï¼Œå¦‚æœå‚æ•°ä¸º0ï¼Œåˆ™ä»srcå’Œä»£ç ä¸­è‡ªåŠ¨å¯¼å‡ºé€šé“æ•°

# 1.4 å®ä¾‹

Mat img = imread("./leno.jpg", IMREAD_COLOR);

Mat img_32;

img.convertTo(img_32, CV_32F, 1 / 255.0, 0);

Mat img_hsv_32;

cvtColor(img_32, img_hsv_32, COLOR_BGR2HSV);

Mat img_hsv;

img_hsv_32.convertTo(img_hsv, CV_8U, 255.0, 0);

Mat img_gray, img_gray_32;

cvtColor(img, img_gray, COLOR_BGR2GRAY);

img_gray.convertTo(img_gray_32, CV_32F, 1 / 255.0, 0);

---

# 2. å¤šé€šé“çš„åˆ†ç¦»ä¸åˆå¹¶

# 2.1 å¤šé€šé“çš„åˆ†ç¦»

void split(inputArrat m,OutputArray mv);

---

- mï¼šå¾…åˆ†ç¦»çš„å¤šé€šé“å›¾åƒ
- mvï¼šåˆ†ç¦»åçš„å•é€šé“å›¾åƒï¼Œä¸ºå‘é‡vectorå½¢å¼

# 2.2 å¤šé€šé“çš„åˆå¹¶

void merge(inputArray mv,outputArray dst);

---

- mvï¼šéœ€è¦åˆå¹¶çš„å›¾åƒå‘é‡vectorï¼Œå…¶ä¸­æ¯ä¸ªå›¾åƒå¿…é¡»æ‹¥æœ‰ç›¸åŒçš„å°ºå¯¸å’Œæ•°æ®ç±»å‹
- dstï¼šåˆå¹¶åè¾“å‡ºçš„å›¾åƒï¼Œé€šé“æ•°ç­‰äºæ‰€æœ‰è¾“å…¥å›¾åƒçš„é€šé“æ•°æ€»å’Œ

# 2.3 å®ä¾‹

Mat img = imread("./leno.jpg", IMREAD_COLOR);

Mat img_32;

img.convertTo(img_32, CV_32F, 1 / 255.0, 0);

Mat img_gray, img_gray_32;

cvtColor(img, img_gray, COLOR_BGR2GRAY);

img_gray.convertTo(img_gray_32, CV_32F, 1 / 255.0, 0);

// åˆ†ç¦»

Mat imgs[3];

split(img, imgs);

Mat img0, img1, img2;

img0 = imgs[0];

img1 = imgs[1];

img2 = imgs[2];

// åˆå¹¶

Mat img_merge;

merge(imgs, 3, img_merge);

---

# 3. ä¸¤ä¸ªå›¾åƒåƒç´ æ¯”è¾ƒ

void min(inputArray src1,inputArray src2,outputArray dst);

void max(inputArray src1,inputArray src2,outputArray dst);

---

- src1ï¼šç¬¬ä¸€ä¸ªå›¾åƒçŸ©é˜µï¼Œå¯ä»¥æ˜¯ä»»æ„é€šé“æ•°çš„çŸ©é˜µ
- src2ï¼šç¬¬äºŒä¸ªå›¾åƒçŸ©é˜µï¼Œå°ºå¯¸å’Œé€šé“æ•°ä»¥åŠæ•°æ®ç±»å‹éƒ½éœ€è¦ä¸src1ä¸€è‡´
- dstï¼š ä¿ç•™å¯¹åº”ä½ç½®è¾ƒå¤§ï¼ˆè¾ƒå°ï¼‰ç°åº¦å€¼åçš„å›¾åƒçŸ©é˜µï¼Œå°ºå¯¸ï¼Œé€šé“æ•°å’Œæ•°æ®ç±»å‹ä¸src1ä¸€è‡´

æ„æ€å°±æ˜¯è¯´ï¼šæˆ‘ä»¬ä½¿ç”¨min()æˆ–max()å‡½æ•°æ¯”è¾ƒå›¾åƒï¼Œç»“æœæ˜¯è¾ƒå°æˆ–è¾ƒå¤§çš„å›¾åƒ

# 3.2. å›¾åƒæœ€å¤§å€¼ä¸æœ€å°å€¼å¯»æ‰¾

void minMaxLoc(inputArray src,double* minVal,double* maxVal,Point* minLoc,Point maxLoc

inputArray mask);

---

- srcï¼šè¾“å…¥å•é€šé“çŸ©é˜µ
- minValï¼šæŒ‡å‘æœ€å°å€¼çš„æŒ‡é’ˆï¼Œå¦‚æœä¸éœ€è¦ï¼Œä½¿ç”¨null
- maxValï¼šæŒ‡å‘æœ€å¤§å€¼çš„æŒ‡é’ˆï¼Œå¦‚æœä¸éœ€è¦ï¼Œåˆ™ä½¿ç”¨null
- minLocï¼šæŒ‡å‘æœ€å°å€¼ä½ç½®çš„æŒ‡é’ˆï¼Œå¦‚æœä¸éœ€è¦ï¼Œåˆ™ä½¿ç”¨null
- maxLocalï¼šæŒ‡å‘æœ€å¤§å€¼ä½ç½®çš„æŒ‡é’ˆï¼Œå¦‚æœä¸éœ€è¦ï¼Œåˆ™ä½¿ç”¨null
- maskï¼šæ©ç çŸ©é˜µï¼Œç”¨äºæ ‡è®°å¯»æ‰¾ä¸Šè¿°å››ä¸ªå€¼çš„èŒƒå›´ï¼Œå‚æ•°é»˜è®¤å€¼æ˜¯noArray()ï¼Œè¡¨ç¤ºå¯»æ‰¾èŒƒå›´æ˜¯çŸ©é˜µä¸­æ‰€æœ‰æ•°æ®

# 3.3. å®ä¾‹

Mat img1 = imread("./leno.jpg", IMREAD_COLOR);

Mat white = imread("./R-C.jpg", IMREAD_COLOR);

Mat black = imread("./v2.jpg", IMREAD_COLOR);

// æ¯”è¾ƒ

Mat cmpMin, cmpMax;

min(img1, white, cmpMin);

max(img1, black, cmpMax);

// å®šä¹‰ä¸€ä¸ªç°åº¦å›¾åƒ

Mat img_gray;

cvtColor(img1, img_gray, COLOR_BGR2GRAY);

double minVal, maxVal;

Point minLoc, maxLoc;

minMaxLoc(img_gray, &minVal, &maxVal, &minLoc, &maxLoc);

---

# 4. å›¾åƒåƒç´ é€»è¾‘è¿ç®—

# 4.1 ä¸¤ä¸ªåƒç´ é€»è¾‘è¿ç®—è§„åˆ™

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320450347-c4d2ee8b-2de9-49d9-85d0-244ce8bcf8ec.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320450347-c4d2ee8b-2de9-49d9-85d0-244ce8bcf8ec.png)

---

# 4.2 ä¸¤ä¸ªå›¾åƒåƒç´ é€»è¾‘è¿ç®—å‡½æ•°

void vitwise_not(inputArray src,outputArray dst,inputArray mask);

void bitwise_and(inputArray src1,inpuArray src2,outputArray dst,inputArray mask);

void bitwise_or(inputArray src1,inpuArray src2,outputArray dst,inputArray mask);

void bitwise_xor(inputArray src1,inpuArray src2,outputArray dst,inputArray mask);

---

- vitwise_not() éè¿ç®—
- è¾“å…¥çŸ©é˜µ
- è¾“å‡ºç»“æœ
- æ©ç çŸ©é˜µï¼ˆèŒƒå›´ï¼‰
- bitwise_and() ä¸è¿ç®—
- è¾“å…¥å‚æ•°1
- è¾“å…¥å‚æ•°2
- è¾“å‡ºç»“æœ
- æ©ç çŸ©é˜µï¼ˆèŒƒå›´ï¼‰
- bitwise_or()æˆ–è¿ç®—
- è¾“å…¥å‚æ•°1
- è¾“å…¥å‚æ•°2
- è¾“å‡ºç»“æœ
- æ©ç çŸ©é˜µï¼ˆèŒƒå›´ï¼‰
- bitwise_xor()å¼‚æˆ–è¿ç®—
- è¾“å…¥å‚æ•°1
- è¾“å…¥å‚æ•°2
- è¾“å‡ºç»“æœ
- æ©ç çŸ©é˜µï¼ˆèŒƒå›´ï¼‰

# 4.3 å®ä¾‹

Mat img1 = (Mat_<uchar>(1, 2) << 0, 5);

Mat img2 = (Mat_<uchar>(1, 2) << 0, 6);

cout << "img1 = " << endl << img1 << endl << endl;

cout << "img2 = " << endl << img2 << endl << endl;

// é€»è¾‘ä¸

Mat img_and;

bitwise_and(img1, img2, img_and);

cout << "img_and = " << endl << img_and << endl << endl;

// é€»è¾‘æˆ–

Mat img_or;

bitwise_or(img1, img2, img_or);

cout << "img_or = " << endl << img_or << endl << endl;

// é€»è¾‘é

Mat img_not;

bitwise_not(img1, img_not);

cout << "img_not = " << endl << img_not << endl << endl;

// é€»è¾‘å¼‚æˆ–

Mat img_xor;

bitwise_xor(img1, img2, img_xor);

cout << "img_xor = " << endl << img_xor << endl << endl;

// å›¾åƒçš„é€»è¾‘è¿ç®—

Mat imgw = imread("./leno.jpg", IMREAD_COLOR);

Mat imgs = imread("./R-C.jpg", IMREAD_COLOR);

Mat img_and2;

bitwise_and(imgw, imgs, img_and2);

Mat img_or2;

bitwise_or(imgw, imgs, img_or2);

Mat img_not2;

bitwise_not(imgw, img_not2);

Mat img_xor3;

bitwise_xor(imgw, imgs, img_xor3);

---

# 5. å›¾åƒçš„äºŒå€¼åŒ–

äºŒå€¼åŒ–å¤„ç†çš„å›¾åƒä¼šè‡ªåŠ¨å°†å½©è‰²å›¾ç‰‡è½¬æ¢ä¸ºç°åº¦å›¾

# 5.1 å›ºå®šé˜ˆå€¼äºŒå€¼åŒ–

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320450377-c6eda19a-2050-41c9-b2c0-f29b8c6aaf36.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320450377-c6eda19a-2050-41c9-b2c0-f29b8c6aaf36.png)

---

å¤§æ¦‚æ„æ€æ˜¯ï¼šæ¯”å¦‚è¾“å…¥ä¸€ä¸ªä¿¡å·ï¼Œä¿¡å·çš„æ ·å¼æ˜¯å°–å³°å¼çš„[[ğŸ¨image.png]](https://cdn.nlark.com/yuque/0/2023/png/33648751/1682936257004-b73077ca-cde5-418e-91c0-42dd9e753584.png#averageHue=%23f5f6f2&clientId=u677624b0-e21e-4&from=paste&height=44&id=u1d7992e4&originHeight=44&originWidth=190&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11787&status=done&style=none&taskId=u92c39139-8006-40b8-9b90-af77873e680&title=&width=190)ï¼Œç»è¿‡æˆ‘ä»¬å¤„ç†ï¼Œå°†è¿™ç§ä¿¡å·å¤„ç†æˆä¸º[[ğŸ¨image.png]](https://cdn.nlark.com/yuque/0/2023/png/33648751/1682936284579-c16d522b-2bfc-4d10-b7cf-c3fd5a44ec97.png#averageHue=%23eeeeec&clientId=u677624b0-e21e-4&from=paste&height=48&id=u490b70d1&originHeight=48&originWidth=186&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7646&status=done&style=none&taskId=u083e2824-0c81-4db1-9fd7-d5d13dded10&title=&width=186)ï¼Œè¿™ç§é«˜ä½çš„å½¢å¼ï¼Œè€Œé«˜ä½åªæœ‰é«˜å’Œä½ä¸¤ç§å½¢å¼ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºäºŒå€¼

1. å‡½æ•°

double threshold(inputArray src,outputArray dst,double thesh,double maxval,int type);

---

- srcï¼šå¾…å¤„ç†çš„å›¾åƒï¼Œå›¾åƒåªèƒ½æ˜¯CV_8Uå’ŒCV_32Fä¸¤ç§æ•°æ®ç±»å‹ï¼Œå¯¹äºå›¾åƒé€šé“æ•°ç›®çš„è¦æ±‚å’Œé€‰æ‹©äºŒå€¼åŒ–æ–¹æ³•ç›¸å…³
- dstï¼šäºŒå€¼åŒ–åçš„å›¾åƒï¼Œä¸è¾“å…¥å›¾åƒå…·æœ‰ç›¸åŒçš„å°ºå¯¸ï¼Œæ•°æ®ç±»å‹å’Œé€šé“æ•°
- threshï¼šäºŒå€¼åŒ–çš„é˜ˆå€¼
- maxvalï¼šäºŒå€¼åŒ–è¿‡ç¨‹çš„æœ€å¤§å€¼
- typeï¼šé€‰æ‹©å›¾åƒäºŒå€¼åŒ–æ–¹æ³•çš„æ ‡å¿—

# 5.2 å®ä¾‹

Mat img = imread("./leno.jpg", IMREAD_GRAYSCALE);

// äºŒå€¼åŒ–

Mat img_binary;

threshold(img, img_binary, 100, 255, THRESH_BINARY);

imshow ("img_binary", img_binary);

// åäºŒå€¼åŒ–

Mat img_binary_inv;

threshold(img, img_binary_inv, 100, 255, THRESH_BINARY_INV);

imshow("img_binary_inv", img_binary_inv);

waitKey (0);

---

# 5.3 è‡ªé€‚åº”é˜ˆå€¼äºŒå€¼åŒ–

double adaptiveThreshold(inputArray src,outputArray dst,double thesh,

double maxval,int adaptiveMethod,int thresholdType,

int blocksize double C);

---

- srcï¼šå¾…å¤„ç†çš„å›¾åƒï¼Œå›¾åƒåªèƒ½æ˜¯CV_8Uå’ŒCV_32Fä¸¤ç§æ•°æ®ç±»å‹ï¼Œå¯¹äºå›¾åƒé€šé“æ•°ç›®çš„è¦æ±‚å’Œé€‰æ‹©äºŒå€¼åŒ–æ–¹æ³•ç›¸å…³
- dstï¼šäºŒå€¼åŒ–åçš„å›¾åƒï¼Œä¸è¾“å…¥å›¾åƒå…·æœ‰ç›¸åŒçš„å°ºå¯¸ï¼Œæ•°æ®ç±»å‹å’Œé€šé“æ•°
- threshï¼šäºŒå€¼åŒ–çš„é˜ˆå€¼
- adaptiveMethodï¼šè‡ªåˆ¶åº”ç¡®å®šé˜ˆå€¼çš„æ–¹æ³•ï¼Œåˆ†ä¸ºå‡å€¼æ³•å’Œé«˜æ–¯æ³•
- thresholdTypeï¼šé€‰æ‹©å›¾åƒäºŒå€¼åŒ–çš„æ–¹æ³•çš„æ ‡å¿—
- blocksizeï¼šè‡ªé€‚åº”ç¡®å®šé˜ˆå€¼çš„åƒç´ é‚»åŸŸå¤§å°ï¼Œä¸€èˆ¬ä¸º3ï¼Œ5ï¼Œ7çš„å¥‡æ•°
- Cï¼šä»å¹³å‡å€¼æˆ–åŠ æƒå¹³å‡å€¼ä¸­å‡å»çš„é˜è¿°ï¼Œå¯ä»¥ä¸ºæ­£ï¼Œä¹Ÿå¯ä»¥ä¸ºè´Ÿæ•°

# 5.4 å®ä¾‹

Mat img = imread("./leno.jpg", IMREAD_GRAYSCALE);

// äºŒå€¼åŒ–

Mat img_binary;

threshold(img, img_binary, 100, 255, THRESH_BINARY);

imshow ("img_binary", img_binary);

// åäºŒå€¼åŒ–

Mat img_binary_inv;

threshold(img, img_binary_inv, 100, 255, THRESH_BINARY_INV);

imshow("img_binary_inv", img_binary_inv);

// è‡ªé€‚åº”é˜ˆå€¼äºŒå€¼åŒ–

Mat img_adaptive;

adaptiveThreshold(img, img_adaptive, 255, ADAPTIVE_THRESH_MEAN_C, THRESH_BINARY, 15, 10);

imshow("img_adaptive", img_adaptive);

waitKey (0);

---

# 1. LUTæŸ¥æ‰¾è¡¨

# 1.1 LUTæŸ¥æ‰¾è¡¨åŸç†

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320464282-bd564c26-32f8-493f-ae8f-aa480f080344.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320464282-bd564c26-32f8-493f-ae8f-aa480f080344.png)

---

æ ¹æ®ä¸€å®šçš„è§„åˆ™å°†æ•°æ®æ˜ å°„

# 1.2 LUTæŸ¥æ‰¾è¡¨å‡½æ•°

void LUT(inputArray src,inputArray lut,outputArray dst)

---

- srcï¼šè¾“å…¥å›¾åƒçŸ©é˜µï¼Œå…¶æ•°æ®ç±»å‹åªèƒ½æ˜¯CV_8U
- lutï¼š256ä¸ªåƒç´ ç°åº¦å€¼çš„æŸ¥æ‰¾è¡¨ï¼Œå•é€šé“æˆ–è€…ä¸srcé€šé“ç›¸åŒ
- dstï¼šè¾“å‡ºå›¾åƒçŸ©é˜µï¼Œå…¶å°ºå¯¸ä¸srcç›¸åŒï¼Œæ•°æ®ç±»å‹ä¸lutç›¸åŒ

# 1.3 å®ä¾‹

// LUTæŸ¥æ‰¾è¡¨ç¬¬ä¸€å±‚

uchar lut[256];

for (int i = 0; i < 256; i++)

{

if (i <= 100)

{

lut [i] = 0;

}

if (i > 100 && i <= 200)

{

lut[i] = 100;

}

if (i > 200)

{

lut[i] = 255;

}

}

Mat lutOne(1, 256, CV_8UC1, lut);

// LUTæŸ¥æ‰¾è¡¨ç¬¬äºŒå±‚

uchar lut2[256];

for (int i = 0; i < 256; i++)

{

if (i <= 100)

{

lut2[i] = 0;

}

if (i > 100 && i <= 150)

{

lut2[i] = 100;

}

if (i > 150 && i <= 200)

{

lut2[i] = 150;

}

if (i > 200)

{

lut2[i] = 255;

}

}

Mat lutTwo(1, 256, CV_8UC1, lut2);

// LUTæŸ¥æ‰¾è¡¨ç¬¬ä¸‰å±‚

uchar lut3[256];

for (int i = 0; i < 256; i++)

{

if (i <= 100)

{

lut3[i] = 100;

}

if (i > 100 && i <= 200)

{

lut3[i] = 200;

}

if (i > 200)

{

lut3[i] = 255;

}

}

Mat lutThree(1, 256, CV_8UC1, lut3);

// æ‹¥æœ‰ä¸‰é€šé“çš„LUTæŸ¥æ‰¾è¡¨çŸ©é˜µ

vector<Mat> lutMats;

lutMats.push_back(lutOne);

lutMats.push_back(lutTwo);

lutMats.push_back(lutThree);

Mat lutTree;

merge(lutMats, lutTree);

// è®¡ç®—å›¾åƒçš„æŸ¥æ‰¾è¡¨

Mat img = imread("./leno.jpg", IMREAD_COLOR);

Mat gray, out1, out2, out3;

LUT (img, lutOne, out1);

LUT(img, lutTwo, out2);

LUT(img, lutThree, out3);

imshow ("img", img);

imshow("out1", out1);

imshow("out2", out2);

imshow("out3", out3);

waitKey(0);

---

# 2. å›¾åƒå°ºå¯¸å˜æ¢

# 2.1 å›¾åƒæ’å€¼åŸç†

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320464313-18737f86-fded-4e7b-90cf-653fb6bf3096.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320464313-18737f86-fded-4e7b-90cf-653fb6bf3096.png)

---

**å¦‚ä½•æ ¹æ®ç°æœ‰çš„åƒç´ æ¨æ–­ä¸´è¿‘çš„åƒç´ **

# 2.2 å›¾åƒç¼©æ”¾

void resize(inputArray src,outputArray dst,size dsize,double fx=0,double fy=0,int interpolation);

---

- srcï¼šè¾“å…¥å›¾åƒ
- dstï¼šè¾“å‡ºå›¾åƒï¼Œå›¾åƒçš„æ•°æ®ç±»å‹ä¸srcç›¸åŒ
- dsizeï¼šè¾“å‡ºå›¾åƒçš„å°ºå¯¸
- fxï¼šæ°´å¹³è½´çš„æ¯”ä¾‹å› å­ï¼Œå¦‚æœå°†æ°´å¹³è½´å˜ä¸ºåŸæ¥çš„ä¸¤å€ï¼Œåˆ™èµ‹å€¼ä¸º2ï¼›
- fyï¼šå‚ç›´è½´çš„æ¯”ä¾‹å› å­ï¼Œå¦‚æœå°†å‚ç›´è½´å˜ä¸ºåŸæ¥çš„ä¸¤å€ï¼Œåˆ™èµ‹å€¼ä¸º2
- interpolationï¼šå·®å€¼æ–¹æ³•çš„æ ‡è¯†

# 2.3 å›¾åƒç¿»è½¬

void flip(inputArray src,outputArray dst,int flipCode);

---

- srcï¼šè¾“å…¥å›¾åƒ
- dstï¼šè¾“å‡ºå›¾åƒï¼Œä¸srcå…·æœ‰ç›¸åŒçš„å¤§å°å’Œæ•°æ®ç±»å‹ä»¥åŠé€šé“æ•°
- flipCodeï¼šç¿»è½¬æ–¹å¼æ ‡å¿—ï¼Œæ•°å€¼å¤§äº0è¡¨ç¤ºç»•yè½´è¿›è¡Œç¿»è½¬ï¼›æ•°å€¼ç­‰äº0ï¼Œè¡¨ç¤ºç»•xè½´è¿›è¡Œç¿»è½¬ï¼›æ•°å€¼å°äº0è¡¨ç¤ºç»•ä¸¤ä¸ªè½´è¿›è¡Œæ—‹è½¬

# 2.4 å›¾åƒçš„æ‹¼æ¥

void hconcat(inputArray src1,inputArray src2,outputArray,dst);

void vconcat(inputArray src1,inputArray src2,outputArray dst);

---

- src1ï¼šç¬¬ä¸€ä¸ªéœ€è¦è¿æ¥çš„matçŸ©é˜µ
- src2ï¼šç¬¬äºŒä¸ªéœ€è¦è¿æ¥çš„matçŸ©é˜µï¼Œä¸ç¬¬ä¸€ä¸ªå‚æ•°å…·æœ‰ç›¸åŒçš„å®½åº¦ï¼Œæ•°æ®ç±»å‹å’Œé€šé“æ•°
- dstï¼šè¿æ¥åçš„matçŸ©é˜µ

# 2.5 å®ä¾‹

// 1. å›¾åƒçš„ç¼©æ”¾

Mat img = imread("./leno.jpg", IMREAD_COLOR);

Mat img_resize;

resize(img, img_resize, Size(100, 100));

imshow("img_resize", img_resize);

// 2. å›¾åƒçš„ç¿»è½¬

Mat img_flip;

flip(img, img_flip, 1);

imshow("img_flip", img_flip);

// 3. å›¾åƒçš„æ‹¼æ¥

Mat img1 = imread("./leno.jpg", IMREAD_COLOR);

Mat img2 = imread("./R-C.jpg", IMREAD_COLOR);

Mat img_h, img_v;

hconcat(img1, img2, img_h);

vconcat(img1, img2, img_v);

imshow("img_h", img_h);

imshow("img_v", img_v);

waitKey(0);

---

# 3. å›¾åƒçš„ä»¿å°„å˜æ¢

# 3.1 ä»¿å°„å˜æ¢ä»‹ç»

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320464354-54d524b4-68e4-43da-a530-f371fe05e19c.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320464354-54d524b4-68e4-43da-a530-f371fe05e19c.png)

---

# 3.2 ä»¿å°„å˜æ¢å‡½æ•°

void cv::warpAffine    (InputArray     src,

OutputArray     dst,

InputArray     M,

Size     dsize,

int     flags = INTER_LINEAR,

int     borderMode = BORDER_CONSTANT,

const Scalar &     borderValue = Scalar()

)

---

- srcï¼šè¾“å…¥å›¾åƒ
- dstï¼šä»¿å°„å˜æ¢åè¾“å‡ºå›¾åƒï¼Œä¸srcæ•°æ®ç±»å‹ç›¸åŒï¼Œä½†æ˜¯å°ºå¯¸ä¸dsizeç›¸åŒ
- Mï¼š2*3çš„å˜æ¢çŸ©é˜µ
- dsizeï¼šè¾“å‡ºå›¾åƒçš„å°ºå¯¸
- flageï¼šæ’å€¼æ–¹æ³•æ ‡å¿—
- borderModeï¼šåƒç´ è¾¹ç•Œå¤–æ¨æ–¹æ³•å‘æ ‡å¿—
- borderValueï¼šå¡«å……å¤–ç•Œä½¿ç”¨çš„æ•°å€¼ï¼Œé»˜è®¤ä¸º0

è¾¹ç•Œå¡«å……æ–¹æ³•å’Œå¯¹åº”æ ‡å¿—

Mat img = imread("./leno.jpg", IMREAD_COLOR);

// 1. ä»¿å°„å˜æ¢çŸ©é˜µ

Mat M = Mat::zeros(2, 3, CV_32FC1);

M.at<float>(0, 0) = 1.0f;

M.at<float>(0, 2) = 100.0f;

M.at<float>(1, 1) = 1.0f;

M.at<float>(1, 2) = 100.0f;

// 2. ä»¿å°„å˜æ¢

Mat img_warp;

warpAffine(img, img_warp, M, Size(img.cols, img.rows));

imshow("img_warp", img_warp);

waitKey(0);

---

# 3.3 å›¾åƒæ—‹è½¬

Mat cv::getRotationMatrix2D    (Point2f center,

double     angle,

double     scale

)

---

- centerï¼šå›¾åƒæ—‹è½¬çš„ä¸­å¿ƒä½ç½®
- angleï¼šå›¾åƒæ—‹è½¬çš„è§’åº¦ï¼Œå•ä½ä¸ºåº¦ï¼Œæ­£å€¼ä¸ºé€†æ—¶é’ˆæ—‹è½¬
- scleï¼šä¸¤ä¸ªè½´çš„æ¯”ä¾‹å› å­ï¼Œå¯ä»¥å®ç°æ—‹è½¬è¿‡ç¨‹ä¸­çš„å›¾åƒç¼©æ”¾ï¼Œä¸ç¼©æ”¾è¾“å…¥1

// 2. å›¾åƒçš„æ—‹è½¬

Mat M2 = getRotationMatrix2D(Point2f(img.cols / 2, img.rows / 2), 45, 1);

---

# 3.4 ä»¿å°„å˜æ¢çŸ©é˜µè®¡ç®—

Mat cv::getAffineTransform    (const Point2f     src[],

const Point2f     dst[]

)

---

- src[]ï¼šåŸå›¾åƒä¸­çš„ä¸‰ä¸ªåƒç´ åæ ‡
- dst[]ï¼šç›®æ ‡å›¾åƒä¸­çš„ä¸‰ä¸ªåƒç´ åæ ‡

// 3. å›¾åƒçš„ä»¿å°„å˜æ¢çŸ©é˜µ

Point2f srcTri[3];

Point2f dstTri[3];

srcTri[0] = Point2f(0, 0);

srcTri[1] = Point2f(img.cols - 1, 0);

srcTri[2] = Point2f(0, img.rows - 1);

dstTri[0] = Point2f(img.cols * 0.0f, img.rows * 0.33f);

dstTri[1] = Point2f(img.cols * 0.85f, img.rows * 0.25f);

dstTri[2] = Point2f(img.cols * 0.15f, img.rows * 0.7f);

Mat M3 = getAffineTransform(srcTri, dstTri);

---

# 4. å›¾åƒé€è§†å˜æ¢

# 4.1 é€è§†å˜æ¢ä»‹ç»

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320464322-5dac6f21-49bc-4eb5-8981-6d06a3b4cf79.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320464322-5dac6f21-49bc-4eb5-8981-6d06a3b4cf79.png)

---

# 4.2 è®¡ç®—é€è§†å˜æ¢çŸ©é˜µå‡½æ•°

Mat cv::getPerspectiveTransform    (InputArray     src,

InputArray         dst,

int             solveMethod = DECOMP_LU

)

---

- src[]ï¼šåŸå›¾åƒä¸­çš„å››ä¸ªåƒç´ åæ ‡
- dst[]ï¼šç›®æ ‡å›¾åƒä¸­çš„å››ä¸ªåƒç´ åæ ‡
- solveMethodï¼šè®¡ç®—é€è§†å˜æ¢çŸ©é˜µæ–¹æ³•çš„æ ‡å¿—

è®¡ç®—æ–¹æ³•æ ‡å¿—

| **æ ‡å¿—å‚æ•°** | **ç®€è®°** | **ä½œç”¨** |
| --- | --- | --- |
| DECOMP_LU | 0 | æœ€ä½³ä¸»è½´å…ƒç´ çš„é«˜æ–¯æ¶ˆå…ƒæ–¹æ³• |
| DECOMP_SVD | 1 | å¥‡å¼‚å€¼åˆ†è§£ï¼ˆSVDï¼‰æ–¹æ³• |
| DECOMP_EIG | 2 | ç‰¹å¾å€¼åˆ†è§£æ³• |
| DECOMP_CHOLESKY | 3 | Choleskyåˆ†è§£æ³• |
| DECOMP_QR | 4 | QRåˆ†è§£æ³• |
| DECOMP_NORMAL | 16 | ä½¿ç”¨æ­£è§„æ–¹ç¨‹å…¬å¼ï¼Œå¯ä»¥å»å‰é¢çš„æ ‡å¿—ä¸€èµ·ä½¿ç”¨ |

// 4. å›¾åƒçš„é€è§†å˜æ¢

Point2f srcQuad[4];

Point2f dstQuad[4];

srcQuad[0] = Point2f(0, 0);

srcQuad[1] = Point2f(img.cols - 1, 0);

srcQuad[2] = Point2f(img.cols - 1, img.rows - 1);

srcQuad[3] = Point2f(0, img.rows - 1);

dstQuad[0] = Point2f(img.cols * 0.05f, img.rows * 0.33f);

dstQuad[1] = Point2f(img.cols * 0.9f, img.rows * 0.25f);

dstQuad[2] = Point2f(img.cols * 0.8f, img.rows * 0.9f);

dstQuad[3] = Point2f(img.cols * 0.2f, img.rows * 0.7f);

Mat M4 = getPerspectiveTransform(srcQuad, dstQuad);

---

# 4.3 é€è§†å˜æ¢å‡½æ•°

void cv::hal::warpPerspective(int     src_type,

const uchar *     src_data,

size_t     src_step,

int     src_width,

int     src_height,

uchar *     dst_data,

size_t     dst_step,

int     dst_width,

int     dst_height,

const double     M[9],

int     interpolation,

int     borderType,

const double     borderValue[4]

)

---

å®ä¾‹ï¼š

// 5. å›¾åƒçš„é€è§†å˜æ¢å‡½æ•°

Mat img_perspective;

warpPerspective(img, img_perspective, M4, Size(img.cols, img.rows));

---

æ•ˆæœï¼š

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320464436-6c7d450f-d9a9-4dd9-8527-08e836d93748.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320464436-6c7d450f-d9a9-4dd9-8527-08e836d93748.png)

---