# 第四章 图像的读取

# 1. 图像的读取

imread()

Mat cv::imread(const String& filename,int flage);

---

- filename : 需要读取图像的文件名称，包含图像地址，名称和图像文件扩展名
- flages : 读取图像形式的标志，默认是IMREAD_COLOR，表示读取的是一张彩色的图像

# 1.2 图像的显示

void namedwindow(consta String& winname,int flags = WINDOW_AUTOSIZE);

---

- winname : 窗口名称，用作窗口的标识符
- flags : 窗口属性设置标识（是否自适应图像，是否可以拖拽）

void imshow(const String & winnanem , InputArray mat);

---

- winname : 要显示图像的窗口的名字，用字符串形式赋值
- mat： 要显示的图像矩阵

这个函数也可以不使用namedwindow()函数来创建窗口，直接显示图像

# 1.3 图像的保存

bool imwrite(const String & filename,InputArrat img,const std::vector<int>& parame)

---

- filename : 保存图像的地址和文件名，包含图像格式
- img： 将要保存的Mat类矩阵变量
- params： 保存图片格式属性设置标志

# 1.4 代码实例

// 彩色图像形式读取

Mat    img = imread("./leno.jpg",IMREAD_COLOR);

// 灰度图形式读取

Mat gray = imread("./leno.jpg", IMREAD_GRAYSCALE);

// 自适应

namedWindow("img", WINDOW_AUTOSIZE);

namedWindow("gray", WINDOW_AUTOSIZE);

// 显示图像

imshow("img", img);

imshow("gray", gray);

// 保存图像

imwrite("./img.jpg", img);

waitKey(0); // 等待按键

---

# 2. vs插件的使用

插件名称：image watch

直接在vs的插件管理中搜索，主要该插件只支持到2015，2022需要安装的是下面这个

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320327266-943ff0db-2684-47dc-b5d4-bd9adbece7e8.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320327266-943ff0db-2684-47dc-b5d4-bd9adbece7e8.png)

---

在vs中查看插件-》视图-》更多窗口-》image watch

![https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320327334-e6520b30-bf82-4b4f-9b67-61c713a91e9e.png](https://cdn.nlark.com/yuque/0/2024/png/23087967/1717320327334-e6520b30-bf82-4b4f-9b67-61c713a91e9e.png)

---

cv::waitKey()函数详解

cv::waitKey() 是 OpenCV 库中的一个函数，它的主要作用是等待和读取用户通过键盘输入的 ASCII 码，其功能类似于 C/C++ 中的 getch() 函数。

函数原型为：int cv::waitKey(int delay = 0)

参数 delay 表示等待键盘输入的时间（以毫秒为单位），默认值为 0，表示无限等待直到用户输入。如果 delay 大于 0，例如 cv::waitKey(100)，那么函数将等待 100 毫秒。如果在这段时间内用户有输入，函数将立即返回输入的 ASCII 码；如果用户在这段时间内没有任何输入，函数将返回 -1。

cv::waitKey() 函数还有一个重要的作用，那就是处理图像显示窗口的内部事件。因此，即使你不需要键盘输入，如果你在程序中使用了 cv::imshow() 来显示图像，你也应该定期调用 cv::waitKey() 函数，否则窗口可能无法正常显示图像。

需要注意的是，cv::waitKey() 函数返回的是一个整数，表示按键的 ASCII 码。如果你想要知道用户具体按了哪个键，你可能需要将这个整数转换为字符。例如，如果用户按了键盘上的 'a' 键，cv::waitKey() 函数将返回 97，这是 'a' 的 ASCII 码。