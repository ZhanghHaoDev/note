# Linux下的nm和ldd的详解

在 Linux 中，`nm` 和 `ldd` 是两个常用的工具，用于检查二进制文件和库的符号和依赖关系。以下是对这两个工具的详细解释：

### **`nm` 工具**

`nm` 命令用于列出目标文件（如可执行文件、目标文件和库文件）中的符号。它可以帮助开发者了解哪些符号在文件中定义，哪些符号是未定义的。

### 常用选项

- `a`：显示所有符号，包括调试符号。
- `g`：只显示全局（外部）符号。
- `u`：只显示未定义的符号。
- `A` 或 `-print-file-name`：在每个符号前显示文件名。
- `C` 或 `-demangle`：将符号名从编译器生成的格式解码为人类可读的格式（适用于 C++ 符号）。

### 示例

列出库文件 `libinfrared_sensor.a` 中的所有符号：

```cpp
nm libinfrared_sensor.a
```

列出库文件 `libinfrared_sensor.a` 中的未定义符号：

```cpp
nm -u libinfrared_sensor.a
```

列出库文件 `libinfrared_sensor.a` 中的所有符号，并在每个符号前显示文件名：

```cpp
nm -A libinfrared_sensor.a
```

### **`ldd` 工具**

`ldd` 命令用于列出可执行文件或共享库的动态依赖关系。它显示文件所依赖的共享库及其路径。

### 常用选项

- `v`：显示版本信息。
- `u`：显示未使用的直接依赖库。
- `r`：显示重定位信息和未解析的符号。

### 示例

列出可执行文件 `my_program` 的动态依赖关系

```cpp
ldd my_program
```

显示可执行文件 `my_program` 的动态依赖关系及其版本信息：

```cpp
ldd -v my_program

```

显示可执行文件 `my_program` 的动态依赖关系及其重定位信息和未解析的符号：

```cpp
ldd -r my_program
```

### **总结**

- `nm` 用于检查目标文件中的符号，可以帮助开发者了解文件中定义和未定义的符号。
- `ldd` 用于检查可执行文件或共享库的动态依赖关系，可以帮助开发者了解文件所依赖的共享库及其路径。

通过使用这两个工具，开发者可以更好地理解和调试二进制文件和库的符号和依赖关系。