# c++中的内联函数

# 1. 内联函数的定义

# 1. 如何定义内联函数

使用关键字inline修饰的函数就叫做内联函数

inline

void fun(int x,int y);

---

# 2. 编译器与内联函数

一般来说是不是内联函数不是加不加inline关键字决定的，而是由编译器决定的，就是说当你在函数的前面添加了inline，编译器也不一定将这个函数设置为内联函数。

# 3. 内联函数的位置

inline函数的声明与定于，常常被放到头文件中，因为编译器必须在他被调用的时候加以展开，所以这个时候其定义必须是有效的。

# 2. 内联函数与普通函数的区别

1. 内联函数比普通函数前面多加一个inline修饰符
2. 内联函数是直接复制“镶嵌”到主函数中的，就是将内联函数的代码直接放到调用内联函数的位置，这与一般的函数不一样，主函数在调用普通函数的时候，是指令跳转到被调用函数的入口地址，执行完被调用函数后，指令再跳转回主函数上继续执行后面的代码，而由于内联函数是将函数的代码直接放到了函数的位置上，所以没有指令跳转，指令按顺序执行。
3. 一般函数的代码只有一份，放到内存的位置上，当程序调用他的时候，指令就跳转过来；当下一次程序调用他的时候，指令又跳转过来，而内联函数是程序中调用几次内联函数，内联函数的代码就会复制几份放在对应的位置上
4. 内联函数一般放在头文件中定义，而一般函数在头文件中声明，在cpp中定义

# 3. 什么时候使用inline

1. 函数本身内容较少，代码较短，函数功能相对简单
2. 函数被调用的频繁，不如循环中的函数

# 4. 什么时候不能使用inline

1. 代码量多，功能复杂，体积庞大，即便加上inline关键字，编译器也不一定响应
2. 递归函数不能使用内联函数

# 5. 好处与坏处

1. 好处：避免了指令的来回跳转，加快程序的执行速度
2. 坏处：代码被复制很多，增加了代码量，占用很多空间

# 6. 类与内联函数

1. 类内定义的函数都是内联函数，不管是否有inlin
2. 函数声明在类内，但定义在类外的看是否有inline修饰符，如果有就是内联函数，没有就不是

# 7. 内联函数声明与实现都写在头文件中

因为inline会实现内联替换，inline是要加到函数实现上而非声明，加到声明上编译器也会忽略。内联展开是在编译时进行的，只有链接的时候源文件之间才有关系，所以内联要想跨源文件必须要把实现写在头文件里。如果一个inline函数会在多个源文件中被用到，那么必须把他定义在头文件中，不然在编译的时候，编译器会找不到内联函数

# 8. 内联函数和模板

内联函数和模板

同时使用内联函数和模板，应该是模板在前面

template <typename T>inline T const& Max (T const& a, T const& b) {     return a < b ? b:a; }